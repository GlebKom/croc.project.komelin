![image](https://github.com/user-attachments/assets/f6e5dddb-9511-4e43-aefe-a64e47375eb4)**Описание проекта**

Мини пет-проект после курса по Java разработке. Кратко, сервис для сохранения фотографий с получением ссылки на эти фотографии (аналог - Imgur или ЯПикс).

**Описание тестирования**

1. Тесты нахожятся в src/test
2. Покрыт базовый функционал сервиса, такой как: получение и сохранение фото, сохранение ссылки на фото, генерация уникального хэша для фотки.
3. Тесты написаны изолировано, связанные классы заменены моками.
4. Тестируется только бизнес логика, интеграции заменены моками.
   
**Примеры тестов**
1. Тест генерации хэшей

![image](https://github.com/user-attachments/assets/935cbea8-910b-42a3-b3d1-cc9126721db5)

Самый обычный модульный тест, даже нечего сказать.

2. Тест сохранения фото

![image](https://github.com/user-attachments/assets/0fdf2af6-a787-4276-b12f-88d8c254b838)
 
Проверяется логика сохранения информации о фотографии в базу данных. 

3. Тест получения ссылки на фото

![image](https://github.com/user-attachments/assets/7a5c172b-86e8-4b63-936a-fce8b50e46b5)

![image](https://github.com/user-attachments/assets/1ee4c435-511a-4621-8ef9-83f83a22c957)

![image](https://github.com/user-attachments/assets/d960b5f8-8f7f-4097-8567-2aede1db5e0e)

![image](https://github.com/user-attachments/assets/976d83d4-6dc8-46e6-b51b-ac0de496ca8c)

Тут проверено 4 сценария, 3 из которых краевые.

1. Когда все окей и мы получили ссылку.
2. Когда время жизни ссылки истекло.
3. Когда количество скачиваний ссылки закончилось.
4. Когда к ссылке обращались слишком частое количество раз (за проверку этой логики отвечает отдельный сервис, в тесте он был заменен моком)


**Описание интеграционного тестирования**
1. Тесты нахожятся в src/test/integrationtest
2. Основными интеграциями выделены взаимодействие с базой данных и API сервиса.

**Тестирование взаимодейсвтия с БД**
![image](https://github.com/user-attachments/assets/1076b19c-404a-4d68-9b9c-c0e0597e6ec4)

![image](https://github.com/user-attachments/assets/32b0afb9-6cb8-48b2-a20d-a322c4cff0f0)

![image](https://github.com/user-attachments/assets/06059cd0-f2ed-4359-87fd-0a666e9f3a06)

Тесты написаны на базе Spring. При помощи аннотации DataJpaTest происходит автоконфигурация параметров подключения к БД и конфигурация H2 базы данных (in-memory база данных).

В первые два теста описывают сохранение в БД сущностей приложения.

Третий тест описывает краевой случай, когда две сущности "Ссылка" сохраняются с одинаковым адресом (в БД поле указано как unique)

**Тестирование API**

![image](https://github.com/user-attachments/assets/eed25382-b7a5-456c-9b42-938115e8f443)

![image](https://github.com/user-attachments/assets/ae9e3ed8-ad0a-460b-8dd6-0d83440a53b5)

![image](https://github.com/user-attachments/assets/5980c3e8-50b9-494c-a9c9-a92d9f6c54a5)

С помощью аннотации WebMvcTest Spring автоматически конфигурирует моковый класс взаимодействия с API сервиса. Объект типа MockMvc предназначен для этого.

Первый тест описывает стандартный сценарий загрузки файла фотографии с валидными параметрами, мы ожидаем 200 ответ с адресом на файл.

Второй тест описывает неверный сценарий использования, где один из параметров невалидный (< 0), в отете мы ожидаем BAD_REQUEST.








